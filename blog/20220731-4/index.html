<!doctype html>
<html lang="zh-CN">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1.0">
		<title>js复制时自动添加版权声明 ~ 博客 ~ 木辛木杉</title>
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
		<link rel="stylesheet" href="/css/main.css">
		<link rel="stylesheet" href="/css/bfq.css">
		<link rel="stylesheet" href="/css/github-dark.min.css">
		<script src="/js/jquery-3.6.0.min.js"></script>
		<script src="/js/jquery.pjax.js"></script>
		<script src="/js/highlight.min.js"></script>
		<script>hljs.highlightAll();</script>
		<script>
			$(document).pjax('a[date-pjax]', '#main-content', {fragment: '#main-content', timeout: '10000'});
			$(document).on('ready pjax:end', function(event) {
				var bbb = $('#bbb');
				var ccc = $('#ccc');
				var slider = $('#slider');
				bbb.click(function(){
					slider.animate({right:0},500);
					bbb.attr("class","gb");
					ccc.attr("class","dk");
				});
				ccc.click(function(){
					slider.animate({right:-350},500);
					ccc.attr("class","gb");
					bbb.attr("class","dk");
				});
			});
		</script>
	</head>
	<body bgcolor="#97a791">
		<div id="main-content">
			<div class="divm">
				<h2>js复制时自动添加版权声明</h2>
				<p class="date">2022.07.31 15:19</p>
				<br>
				<p>参考：<a class="lianJie" target="_blank" href="//diygod.me/2298/">https://diygod.me/2298/</a></p>
				<p>下面是Demo和代码：</p>
				<a class="lianJie" target="_blank" href="./demo.html">Demo</a>
				<p>直接引用下面的js文件</p>
				<a class="lianJie" target="_blank" href="//github.com/1210718010/1210718010.github.io/blob/master/js/link.js">time.js</a>
				<pre><code class="language-html">
&ltscript src="https://muxmus.com/js/link.js"&gt&lt/script&gt
				</code></pre>
				<p class="zhuShi">ps：link.js文件可能需要引用在正文中，也就是&ltbody&gt和&lt/body&gt之间</p>
				<p>下面是带注释讲解的js代码</p>
				<pre><code class="language-js">
// JavaScript Document
document.body.addEventListener('copy',function(e){
	if(window.getSelection().toString() && window.getSelection().toString().length > 20){
	//这里的20是复制的长度超过20个字时生效（汉字字母符号空格都算一个字），可根据情况自行更改
		setClipboardText(e);
	}
});
function setClipboardText(event){
	var clipboardData = event.clipboardData || window.clipboardData;
	if(clipboardData){
		event.preventDefault();
		var htmlData = window.getSelection().toString() + '&ltbr&gt' + '&ltbr&gt' + '--------------------' + '&ltbr&gt' + '作者：木辛木杉' + '&ltbr&gt' + '原文：' + window.location.href + '&ltbr&gt' + 'MIT License' + '&ltbr&gt' + 'Copyright (c) 2022 木辛木杉';
		var textData = window.getSelection().toString() + '\n' + '\n' + '--------------------' + '\n' + '作者：木辛木杉' + '\n' + '原文：' + window.location.href + '\n' + 'MIT License'+ '\n' + 'Copyright (c) 2022 木辛木杉';
		//这里设置添加在剪贴板里的文字，分别添加在html和纯文本里
		//window.getSelection().toString()是复制的内容，&ltbr&gt和\n是回车，window.location.href是当前页面的网址
		//可自行组合，文字和符号打单引号，将所有内容用加号连在一起
		clipboardData.setData('text/html', htmlData);
		clipboardData.setData('text/plain',textData);
	}
}
				</code></pre>
			</div>
			<div id="slider">
				<img class="tx" src="/img/bk_8.png" alt="" />
				<div class="js">
					<br>
					<p><a date-pjax href="/blog/">返回目录</a></p>
					<br>
					<p>自制网页js音乐播放器</p>
					<p><a date-pjax href="/blog/20220727-2/">天台山</a></p>
					<p><a date-pjax href="/blog/20220727/"></a>中华大扁锹饲养日志</p>
				</div>
			</div>
			<div class="dk" id="bbb">
				<img class="cd" alt="" src="/img/cd.svg" />
			</div>
			<div class="gb" id="ccc">
				<img class="cd" alt="" src="/img/gb.svg" />
			</div>
			<script src="/js/cbl.js"></script>
			<script src="/js/link.js"></script>
		</div>
		<script src="/js/bfq.js"></script>
	</body>
</html>